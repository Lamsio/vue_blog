(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{493:function(t,s,e){"use strict";e.r(s);var a=e(4),r=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h2",{attrs:{id:"request-response"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request-response"}},[t._v("#")]),t._v(" Request & Response")]),t._v(" "),s("h4",{attrs:{id:"request"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#request"}},[t._v("#")]),t._v(" Request")]),t._v(" "),s("p",[t._v("请求数据分为三部分")]),t._v(" "),s("ol",[s("li",[t._v("请求行")]),t._v(" "),s("li",[t._v("请求头")]),t._v(" "),s("li",[t._v("请求体")])]),t._v(" "),s("p",[t._v("![[Pasted image 20220610145409.png]]")]),t._v(" "),s("h6",{attrs:{id:"请求流和请求参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#请求流和请求参数"}},[t._v("#")]),t._v(" 请求流和请求参数")]),t._v(" "),s("p",[t._v("用户发送表单往往以POST形式发送，但偶尔会以GET形式携参访问。\n我们有两种获取参数的方式：")]),t._v(" "),s("ol",[s("li",[s("code",[t._v('req.getParameter("参数名")')]),t._v(" - 常见于POST")]),t._v(" "),s("li",[s("code",[t._v("req.getQueryString()")]),t._v(" - 常见于GET")])]),t._v(" "),s("p",[t._v("除了以上两种获取请求参数方式，有时我们还会用到请求流获取。\n"),s("code",[t._v("req.getReader()")]),t._v("，该函数返回的是"),s("strong",[t._v("BufferedReader")]),t._v("类型的数据，数据在发送方发送时会以UTF-8形式进行URL编码，因此会生成类似"),s("code",[t._v("%E5%D3%B8%C9...")]),t._v("样式的数据。接收方收到这些数据后需要以同样的形式进行解码，例如UTF-8解码。")]),t._v(" "),s("h6",{attrs:{id:"url编码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#url编码"}},[t._v("#")]),t._v(" URL编码")]),t._v(" "),s("ol",[s("li",[t._v("将字符串按照编码方式转为二进制")]),t._v(" "),s("li",[t._v("每个字节转为2个16进制数并在前面加上%")])]),t._v(" "),s("h4",{attrs:{id:"请求转发"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#请求转发"}},[t._v("#")]),t._v(" 请求转发")]),t._v(" "),s("p",[t._v("有时，我们以功能划分网页时，可能需要跳转到其他网页去实现其他功能，请求转发是个很好的选择，它会将请求打包后发送到其他uri进行访问。")]),t._v(" "),s("p",[s("code",[t._v('req.getRequestDispatcher("/demo2").forward(req,resp);')])]),t._v(" "),s("p",[t._v("![[Pasted image 20220610162336.png]]")]),t._v(" "),s("h4",{attrs:{id:"response"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#response"}},[t._v("#")]),t._v(" Response")]),t._v(" "),s("p",[t._v("响应数据也分为三类：")]),t._v(" "),s("ol",[s("li",[t._v("响应行 [HTTP/1.1 200 OK]")]),t._v(" "),s("li",[t._v("响应头 [Content-Type: text/html]")]),t._v(" "),s("li",[t._v("响应体 [<body>Hello</body>]")])]),t._v(" "),s("h6",{attrs:{id:"重定向"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重定向"}},[t._v("#")]),t._v(" 重定向")]),t._v(" "),s("p",[t._v("Redirect：一种资源跳转方式\n有时网页A无法处理的内容可以让请求跳转至网页B进行处理。\n与转发不同，转发不会跳转URL，重定向会。\n![[Pasted image 20220610163604.png]]")]),t._v(" "),s("h6",{attrs:{id:"字符流输出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字符流输出"}},[t._v("#")]),t._v(" 字符流输出")]),t._v(" "),s("p",[t._v("有时，我们希望输出一些内容在网页时，可以通过获取到"),s("code",[t._v("HttpServletResponse")]),t._v("对象的PrintWriter实现。\n"),s("code",[t._v("HttpServletResponse")]),t._v("对象为用户提供了一个"),s("code",[t._v("getWriter()")]),t._v("方法，该方法能获取到PrintWriter。通过"),s("code",[t._v("resp.getWriter().println()")]),t._v("方法就能实现输出内容在网页上。")]),t._v(" "),s("h6",{attrs:{id:"字节流输出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#字节流输出"}},[t._v("#")]),t._v(" 字节流输出")]),t._v(" "),s("p",[t._v("但字符流通常只用于一些简单内容而已，更常用的是字节流。我们可以将图片、文件通过JAVA IO读取后，再用循环将内容输出在网页上，常见的功能就是输出特定html在网页上。\n如果这种功能手写属实有点麻烦，因此我们建议使用外部库"),s("code",[t._v("commons-io")]),t._v("，该库提供了"),s("code",[t._v("copy")]),t._v("方法足以输出任何形式的内容在网页上。")]),t._v(" "),s("div",{staticClass:"language-java line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-java"}},[s("code",[s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileInputStream")]),t._v(" fis "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("FileInputStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"C:\\\\Users\\\\LAM\\\\Downloads\\\\jquery.js"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ServletOutputStream")]),t._v(" sos "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" resp"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("getOutputStream")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("IOUtils")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("copy")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fis"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("sos"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])])])}),[],!1,null,null,null);s.default=r.exports}}]);