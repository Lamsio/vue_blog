(window.webpackJsonp=window.webpackJsonp||[]).push([[126],{455:function(t,r,a){"use strict";a.r(r);var e=a(4),v=Object(e.a)({},(function(){var t=this,r=t._self._c;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("p",[t._v("通过一系列工具或方法对路由进行各种控制的策略\n影响路由的产生、发布和选择等，进而影响报文的转发路径")]),t._v(" "),r("h4",{attrs:{id:"过滤器"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#过滤器"}},[t._v("#")]),t._v(" 过滤器")]),t._v(" "),r("p",[t._v("路由策略的核心内容是过滤器，通过使用过滤器，定义一组匹配规则")]),t._v(" "),r("p",[t._v("常见的过滤器有以下几种：\n"),r("img",{attrs:{src:"/more/Pasted%20image%2020230103193834.png",alt:"avatar"}})]),t._v(" "),r("h4",{attrs:{id:"ip-prefix"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#ip-prefix"}},[t._v("#")]),t._v(" IP-prefix")]),t._v(" "),r("p",[t._v("我们在HCIA中学习过一种最基本的过滤方式 —— ACL\n这种方式有个很明显弊端，当匹配到任一条目后，后续条目将不再匹配。")]),t._v(" "),r("p",[t._v("我们有一种需求，如"),r("code",[t._v("192.168.0.0/16")]),t._v("和"),r("code",[t._v("192.168.0.0/24")]),t._v("\n我们只想要"),r("code",[t._v("192.168.0.0/16")]),t._v("而不想要"),r("code",[t._v("192.168.0.0/24")]),t._v("，这在ACL中是办不到的\n因为我们知道24是包含在16中的")]),t._v(" "),r("p",[t._v("但在IP-prefix中则可以做到精确过滤，我们通过"),r("code",[t._v("[Huawei] ip ip-prefix test permit 192.168.0.0 16")]),t._v("就能生成一条IP-Prefix条目，这个16是掩码而非ACL中的通配符，IP-Prefix完全限定了掩码和网段，因此通过的数据必须严格遵守该规定。")]),t._v(" "),r("p",[t._v("IP-Prefix类似于思科的ACL策略，即默认不通过，当设定的条目皆不符合时，默认为deny")]),t._v(" "),r("p",[t._v("此外，IP-Prefix还支持范围匹配\n"),r("img",{attrs:{src:"/more/Pasted%20image%2020230104161932.png",alt:"avatar"}})]),t._v(" "),r("h4",{attrs:{id:"filter-policy"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#filter-policy"}},[t._v("#")]),t._v(" Filter-policy")]),t._v(" "),r("p",[t._v("上面IP-Prefix中我们只是单纯地定义了一条过滤语句，并没有实际使用")]),t._v(" "),r("p",[t._v("Filter-policy是一种常用的"),r("strong",[t._v("路由过滤工具")]),t._v("，它只能用于过滤路由，无法过滤LSA，不能修改路由属性")]),t._v(" "),r("p",[t._v("Filter-policy需要分两种情况进行说明，分别是RIP和OSPF，我们知道OSPF是由LSDB维护路由链路状态的，而且各个路由器中的OSPF LSDB都肯定是一样的，因此我们无法过滤LSA。而RIP则不同了\n"),r("img",{attrs:{src:"/more/Pasted%20image%2020230104170040.png",alt:"avatar"}}),t._v("\n我们可以通过出口（是否对外输出该路由）或者入口（是否接收该路由），进行路由过滤")]),t._v(" "),r("p",[t._v("虽然说OSPF必须保证各个LSDB都是相同的，但我们依旧可以过滤其输出的路由结果\n"),r("img",{attrs:{src:"/more/Pasted%20image%2020230104170439.png",alt:"avatar"}})]),t._v(" "),r("p",[t._v("如图所示，为确保LSDB一致，我们不能过滤LSA，但LSDB通过SPF算法计算出路由，这个路由我们是可以进行过滤的，也就是说，出接口是不能过滤的因为都是LSA，能过滤的地方只有在SPF计算后才行。")])])}),[],!1,null,null,null);r.default=v.exports}}]);