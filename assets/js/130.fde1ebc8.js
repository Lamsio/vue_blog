(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{459:function(a,t,r){"use strict";r.r(t);var v=r(4),s=Object(v.a)({},(function(){var a=this,t=a._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h4",{attrs:{id:"简介"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[a._v("#")]),a._v(" 简介")]),a._v(" "),t("p",[a._v("目前无线网络中，主要分为FAT AP和FIT AP+AC这两种部署模式，前者适合小型网络环境下部署，后者适合大型网络环境下部署，FAT AP拥有物理层、数据加密、用户认证QoS、网络管理、漫游技术集于一身，但由于需要手动设置各个FAT AP，因此在几千台AP的环境下极其难以管理，因此在大型网络中，我们采用FIT AP+AC的方式，这种方式允许大批量精细化部署，实现计费等一系列增值功能，而这些功能主要就是通过CAPWAP实现。在早年，由于各厂商都有不同的协商技术，导致了不同AP设备间难以通信。")]),a._v(" "),t("p",[t("a",{attrs:{href:"https://www.bilibili.com/video/BV1ba411x779?p=12&vd_source=bb0313f78d23de22342b803be3bac89c",target:"_blank",rel:"noopener noreferrer"}},[a._v("1.8 CAPWAP隧道_哔哩哔哩_bilibili"),t("OutboundLink")],1)]),a._v(" "),t("h4",{attrs:{id:"起源"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#起源"}},[a._v("#")]),a._v(" 起源")]),a._v(" "),t("p",[t("img",{attrs:{src:"/more/Pasted%20image%2020221224144620.png",alt:"avatar"}})]),a._v(" "),t("p",[a._v("从上图中可以看到各协议或多或少都有些许缺点，如LWAPP并不支持数据加密。")]),a._v(" "),t("p",[a._v("因此CAPWAP工作组将几个厂商的协议优势整合到一起")]),a._v(" "),t("h4",{attrs:{id:"capwap隧道"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#capwap隧道"}},[a._v("#")]),a._v(" CAPWAP隧道")]),a._v(" "),t("p",[a._v("CAPWAP定义了如何对AP进行管理、业务配置，即AC通过CAPWAP隧道来实现对AP的集中化管理和控制。")]),a._v(" "),t("p",[t("strong",[a._v("功能：")])]),a._v(" "),t("ol",[t("li",[a._v("AP对AC的自动发现")]),a._v(" "),t("li",[a._v("AP与AC间的状态维护")]),a._v(" "),t("li",[a._v("AC通过CAPWAP隧道对AP进行管理、业务配置下发")])]),a._v(" "),t("h4",{attrs:{id:"capwap基本报文格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#capwap基本报文格式"}},[a._v("#")]),a._v(" CAPWAP基本报文格式")]),a._v(" "),t("p",[t("img",{attrs:{src:"/more/Pasted%20image%2020221224145230.png",alt:"avatar"}})]),a._v(" "),t("p",[a._v("CAPWAP隧道主要有两种报文，控制报文和数据报文。")]),a._v(" "),t("h4",{attrs:{id:"隧道建立"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#隧道建立"}},[a._v("#")]),a._v(" 隧道建立")]),a._v(" "),t("p",[t("img",{attrs:{src:"/more/Pasted%20image%2020221224145412.png",alt:"avatar"}})]),a._v(" "),t("ol",[t("li",[a._v("DHCP交互 - AP获取IP地址用于与AC交互")]),a._v(" "),t("li",[a._v("发现阶段 - AP通过广播寻找AC（同广播域），当然也可以在DHCP交互阶段时加入OPTION43/15选项，用于告知DHCP服务器将AC的IP地址一并发来。这样AP在获取IP地址的同时也能知道AC的具体IP")]),a._v(" "),t("li",[a._v("DTLS连接（可选）- DTLS加密，默认关闭")]),a._v(" "),t("li",[a._v("Join - AP申请加入AC，但需要提早在AC的认证名单中加入AP的MAC地址")]),a._v(" "),t("li",[a._v("Image Data - 对比AP和AC的文件版本，如果不一致AP会发送更新请求，请求下发版本信息给AP")]),a._v(" "),t("li",[a._v("Configuration status - 检查AP与AC的配置是否一致，就算不一致，也不会更新")]),a._v(" "),t("li",[a._v("Data check - 该阶段只是用于检查报文是否有错误")]),a._v(" "),t("li",[a._v("Run - AP维护与AC间的通信，上图中有两个隧道，但并不分先后次序")]),a._v(" "),t("li",[a._v("Configuration update - 倘若先前配置信息不一致，则在该阶段更新。")])]),a._v(" "),t("h6",{attrs:{id:"option-43-15"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#option-43-15"}},[a._v("#")]),a._v(" OPTION 43/15")]),a._v(" "),t("p",[t("img",{attrs:{src:"/more/Pasted%20image%2020221224151655.png",alt:"avatar"}})]),a._v(" "),t("h6",{attrs:{id:"join阶段"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#join阶段"}},[a._v("#")]),a._v(" JOIN阶段")]),a._v(" "),t("p",[t("img",{attrs:{src:"/more/Pasted%20image%2020221224151856.png",alt:"avatar"}})]),a._v(" "),t("h4",{attrs:{id:"结语"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#结语"}},[a._v("#")]),a._v(" 结语")]),a._v(" "),t("p",[a._v("在经历完上述的流程后，AP就能向外发出信号，但问题是它如何向接入设备发送信号？如何展示其SSID呢？这就需要看下一节了。")])])}),[],!1,null,null,null);t.default=s.exports}}]);