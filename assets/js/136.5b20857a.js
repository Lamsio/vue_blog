(window.webpackJsonp=window.webpackJsonp||[]).push([[136],{465:function(t,a,s){"use strict";s.r(a);var r=s(4),e=Object(r.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"nat网络地址转换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nat网络地址转换"}},[t._v("#")]),t._v(" NAT网络地址转换")]),t._v(" "),a("p",[t._v("用于将私有地址转公有地址")]),t._v(" "),a("p",[t._v("NAT分为三类")]),t._v(" "),a("ol",[a("li",[t._v("静态NAT")]),t._v(" "),a("li",[t._v("动态NAT")]),t._v(" "),a("li",[t._v("端口复用")])]),t._v(" "),a("h4",{attrs:{id:"私有地址空间"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#私有地址空间"}},[t._v("#")]),t._v(" 私有地址空间")]),t._v(" "),a("p",[t._v("A类: 10.0.0.0-10.255.255.255\nB类: 172.16.0.0 - 172.31.255.255\nC类: 192.168.0.0 - 192.168.255.255")]),t._v(" "),a("h4",{attrs:{id:"静态nat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#静态nat"}},[t._v("#")]),t._v(" 静态NAT")]),t._v(" "),a("p",[a("img",{attrs:{src:"/more/Pasted%20image%2020220604131714.png",alt:"avatar"}})]),t._v(" "),a("p",[t._v("当内网设备需要访问外网时，数据包会经过路由器做静态NAT，此时路由器会得到一个地址映射表内部设备的包将会以外网IP的形式访问外网")]),t._v(" "),a("p",[t._v("但静态NAT并没有解决我们面临的问题，以静态NAT形式，一个私有地址就需要一个公有地址，这显然不合理（我干啥不在本地直接用公有地址呢，你说是吧？）")]),t._v(" "),a("h4",{attrs:{id:"动态nat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动态nat"}},[t._v("#")]),t._v(" 动态NAT")]),t._v(" "),a("p",[t._v("即在路由器上定义一个公网IP池（池内的公网IP必须是你拥有的），其实本质上和静态区别不大，静态是网络管理员手动为每个内网IP分配一个外网IP，而动态则是交给路由器为每个内网IP分配外网IP")]),t._v(" "),a("h4",{attrs:{id:"端口复用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#端口复用"}},[t._v("#")]),t._v(" 端口复用")]),t._v(" "),a("p",[t._v("前两种都没有解决公网IP紧缺的问题（1内网->1外网），但端口复用策略完美的解决了该问题。包从路由器传到外网前会被打上端口号作为标识，这样一个IP就能最多支持65535个内网设备了\n"),a("img",{attrs:{src:"/more/Pasted%20image%2020220604133513.png",alt:"avatar"}})]),t._v(" "),a("h4",{attrs:{id:"配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[t._v("#")]),t._v(" 配置")]),t._v(" "),a("ol",[a("li",[t._v("静态NAT转换")]),t._v(" "),a("li",[t._v("动态NAT转换")]),t._v(" "),a("li",[t._v("端口复用")])]),t._v(" "),a("h6",{attrs:{id:"静态nat-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#静态nat-2"}},[t._v("#")]),t._v(" 静态NAT")]),t._v(" "),a("p",[t._v("建立静态转换：\n"),a("code",[t._v("Router(config)#ip nat inside source static [内网IP] [外网IP]")])]),t._v(" "),a("p",[t._v("在与内网连接的接口配置："),a("code",[t._v("Router(config-if)#ip nat inside")]),t._v("\n在与外网连接的接口配置："),a("code",[t._v("Router(config-if)#ip nat outside")])]),t._v(" "),a("p",[t._v("查看配置: "),a("code",[t._v("Router#show ip nat translations")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/more/Pasted%20image%2020220604134138.png",alt:"avatar"}})]),t._v(" "),a("h6",{attrs:{id:"动态nat-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#动态nat-2"}},[t._v("#")]),t._v(" 动态NAT")]),t._v(" "),a("p",[t._v("定义一个公网IP池: "),a("code",[t._v("Router(config)#ip nat pool [name] [起始IP段] [结束IP段]")])]),t._v(" "),a("p",[t._v("定义ACL允许内网地址转换: "),a("code",[t._v("Router(config)#access-list [access-list-number] permit [source]")])]),t._v(" "),a("p",[t._v("建立动态转换: "),a("code",[t._v("Router(config)#ip nat inside source list [access-list-number] [pool]")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/more/Pasted%20image%2020220604135017.png",alt:"avatar"}})]),t._v(" "),a("h6",{attrs:{id:"pat转换"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pat转换"}},[t._v("#")]),t._v(" PAT转换")]),t._v(" "),a("p",[t._v("定义ACL允许内网地址转换: "),a("code",[t._v("Router(config)#access-list [access-list-number] permit [source]")])]),t._v(" "),a("p",[t._v("建立动态转换: "),a("code",[t._v("Router(config)#ip nat inside source list [access-list-number] interface [interfaceName] overload")])]),t._v(" "),a("p",[a("img",{attrs:{src:"/more/Pasted%20image%2020220604135535.png",alt:"avatar"}})]),t._v(" "),a("h4",{attrs:{id:"这和静态、动态路由有何区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#这和静态、动态路由有何区别"}},[t._v("#")]),t._v(" 这和静态、动态路由有何区别？")]),t._v(" "),a("p",[t._v("静态路由和动态路由的配置是为了实现网络间通信，而NAT则是做地址转换的")])])}),[],!1,null,null,null);a.default=e.exports}}]);